name: Updater

on:
  workflow_dispatch:
  schedule:
    - cron: "0 0 */5 * *"

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Update core scripts
        run: |
          cd static/uv/
          wget -O uv.bundle.js https://github.com/titaniumnetwork-dev/Ultraviolet-Static/raw/main/uv/uv.bundle.js -nv
          wget -O uv.handler.js https://github.com/titaniumnetwork-dev/Ultraviolet-Static/raw/main/uv/uv.handler.js -nv
          wget -O uv.sw.js https://github.com/titaniumnetwork-dev/Ultraviolet-Static/raw/main/uv/uv.sw.js -nv
          cd ../../
          npm ci
          git config --local user.email '41898282+github-actions[bot]@users.noreply.github.com'
          git config --local user.name 'github-actions[bot]'
          git add -A || echo
          git commit -m "Update" || echo
          git push || exit 0
